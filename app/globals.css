@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --color-primary: 29 49 97;
    --color-primary-hover: 23 39 77;
    
    /* Light mode semantic tokens */
    --background: #f9fafb;
    --foreground: #111827;
    --card: #ffffff;
    --card-foreground: #111827;
    --muted: #f3f4f6;
    --muted-foreground: #6b7280;
    --border: #e5e7eb;
    --border-subtle: #f3f4f6;
    --input: #ffffff;
    --ring: #3b82f6;
    
    /* Status colors - light mode */
    --status-success: #059669;
    --status-success-bg: #ecfdf5;
    --status-warning: #d97706;
    --status-warning-bg: #fffbeb;
    --status-error: #dc2626;
    --status-error-bg: #fef2f2;
    --status-info: #2563eb;
    --status-info-bg: #eff6ff;
  }

  .dark {
    --background: #0f172a;
    --foreground: #f1f5f9;
    --card: #1e293b;
    --card-foreground: #f1f5f9;
    --muted: #334155;
    --muted-foreground: #94a3b8;
    --border: #334155;
    --border-subtle: #1e293b;
    --input: #1e293b;
    --ring: #3b82f6;
    
    /* Status colors - dark mode */
    --status-success: #34d399;
    --status-success-bg: rgba(16, 185, 129, 0.15);
    --status-warning: #fbbf24;
    --status-warning-bg: rgba(245, 158, 11, 0.15);
    --status-error: #f87171;
    --status-error-bg: rgba(239, 68, 68, 0.15);
    --status-info: #60a5fa;
    --status-info-bg: rgba(59, 130, 246, 0.15);
  }

  body {
    @apply antialiased bg-[var(--background)] text-[var(--foreground)] transition-colors duration-200;
  }

  /* More specific focus styles to avoid affecting all elements */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible,
  [tabindex]:focus-visible {
    @apply outline-none ring-2 ring-blue-500 ring-offset-2;
  }
  
  .dark button:focus-visible,
  .dark a:focus-visible,
  .dark input:focus-visible,
  .dark select:focus-visible,
  .dark textarea:focus-visible,
  .dark [tabindex]:focus-visible {
    @apply ring-offset-slate-900;
  }
}

@layer components {
  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  .btn-primary {
    @apply btn bg-accent text-white hover:bg-accent-hover active:scale-[0.98];
  }
  .btn-secondary {
    @apply btn bg-[var(--card)] text-[var(--foreground)] border border-[var(--border)] hover:bg-[var(--muted)] hover:border-gray-400 dark:hover:border-slate-500;
  }
  .btn-ghost {
    @apply btn text-[var(--muted-foreground)] hover:text-[var(--foreground)] hover:bg-[var(--muted)];
  }
  .btn-danger {
    @apply btn bg-red-600 text-white hover:bg-red-700;
  }
  .btn-sm { @apply px-2 py-1 text-xs; }

  /* Inputs */
  .input {
    @apply w-full px-3 py-1.5 text-sm border border-[var(--border)] rounded-md shadow-sm placeholder-[var(--muted-foreground)] bg-[var(--input)] text-[var(--foreground)] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
  }
  .select {
    @apply w-full px-3 py-1.5 text-sm border border-[var(--border)] rounded-md shadow-sm bg-[var(--input)] text-[var(--foreground)] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none pr-8 cursor-pointer bg-no-repeat;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-size: 1.5em 1.5em;
    background-position: right 0.5rem center;
  }
  .dark .select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2394a3b8' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  }
  .label { @apply block text-xs font-medium text-[var(--foreground)] mb-1; }

  /* Cards */
  .card { @apply bg-[var(--card)] border border-[var(--border)] rounded-lg shadow-sm overflow-hidden; }
  .card-header { @apply px-4 py-3 border-b border-[var(--border-subtle)] flex items-center justify-between bg-gray-50 dark:bg-slate-800/50; }
  .card-title { @apply text-sm font-semibold text-[var(--card-foreground)]; }
  .card-body { @apply p-4; }

  /* Stats */
  .stat-card { @apply bg-[var(--card)] border border-[var(--border)] rounded-lg p-4 hover:border-gray-300 dark:hover:border-slate-600 transition-colors; }
  .stat-value { @apply text-2xl font-bold text-[var(--card-foreground)] tabular-nums; }
  .stat-label { @apply text-xs font-medium text-[var(--muted-foreground)] uppercase tracking-wide mt-1; }

  /* Badges - Light mode */
  .badge { @apply inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full; }
  .badge-gray { @apply badge bg-gray-100 text-gray-700 dark:bg-slate-700 dark:text-slate-300; }
  .badge-blue { @apply badge bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-600/20 dark:bg-blue-500/15 dark:text-blue-400 dark:ring-blue-400/30; }
  .badge-green { @apply badge bg-emerald-50 text-emerald-700 ring-1 ring-inset ring-emerald-600/20 dark:bg-emerald-500/15 dark:text-emerald-400 dark:ring-emerald-400/30; }
  .badge-yellow { @apply badge bg-amber-50 text-amber-700 ring-1 ring-inset ring-amber-600/20 dark:bg-amber-500/15 dark:text-amber-400 dark:ring-amber-400/30; }
  .badge-red { @apply badge bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/20 dark:bg-red-500/15 dark:text-red-400 dark:ring-red-400/30; }
  .badge-purple { @apply badge bg-purple-50 text-purple-700 ring-1 ring-inset ring-purple-600/20 dark:bg-purple-500/15 dark:text-purple-400 dark:ring-purple-400/30; }

  /* Tables */
  .table-container { @apply bg-[var(--card)] border border-[var(--border)] rounded-lg overflow-hidden; }
  .table { @apply w-full text-sm; }
  .table thead { @apply bg-[var(--muted)] border-b border-[var(--border)]; }
  .table th { @apply px-4 py-2.5 text-left text-xs font-semibold text-[var(--muted-foreground)] uppercase tracking-wider; }
  .table td { @apply px-4 py-3 text-[var(--card-foreground)]; }
  .table tbody tr { @apply border-b border-[var(--border-subtle)] last:border-0 hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors; }
  .table-row-clickable { @apply cursor-pointer; }
  .table-row-selected { @apply !bg-blue-50 hover:!bg-blue-50 dark:!bg-blue-500/15 dark:hover:!bg-blue-500/15; }

  /* Empty state */
  .empty-state { @apply flex flex-col items-center justify-center py-12 px-4 text-center; }
  .empty-state-icon { @apply text-4xl mb-3 grayscale opacity-40; }
  .empty-state-title { @apply text-sm font-medium text-[var(--foreground)]; }
  .empty-state-description { @apply text-xs text-[var(--muted-foreground)] mt-1; }

  /* Modal */
  .modal-backdrop { @apply fixed inset-0 bg-gray-900/60 dark:bg-black/70 backdrop-blur-sm z-50; }
  .modal { @apply fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-[var(--card)] rounded-lg shadow-xl z-50 w-full max-w-lg max-h-[85vh] overflow-hidden border border-[var(--border)]; }
  .modal-header { @apply px-5 py-4 border-b border-[var(--border)]; }
  .modal-body { @apply p-5 overflow-y-auto; }
  .modal-footer { @apply px-5 py-4 border-t border-[var(--border-subtle)] bg-gray-50 dark:bg-slate-800/50 flex justify-end gap-2; }

  /* Dropdown */
  .dropdown { @apply absolute right-0 mt-1 w-48 bg-[var(--card)] border border-[var(--border)] rounded-lg shadow-lg z-50 py-1; }
  .dropdown-item { @apply block w-full px-3 py-2 text-sm text-left text-[var(--card-foreground)] hover:bg-[var(--muted)]; }

  /* Kanban - Updated with cleaner styling */
  .kanban-column { 
    @apply bg-[var(--muted)] rounded-lg p-3 min-h-[300px];
  }
  .kanban-card { 
    @apply block bg-[var(--card)] rounded-lg border border-[var(--border)] p-3 hover:border-gray-300 dark:hover:border-slate-600 hover:shadow-sm transition-all;
  }
  .kanban-card:focus-visible {
    @apply outline-none ring-2 ring-blue-500 ring-offset-2;
  }
  .dark .kanban-card:focus-visible {
    @apply ring-offset-slate-900;
  }

  /* Tabs */
  .tab { @apply px-4 py-2 text-sm font-medium text-[var(--muted-foreground)] border-b-2 border-transparent hover:text-[var(--foreground)] hover:border-gray-300 dark:hover:border-slate-600 transition-colors; }
  .tab-active { @apply text-[var(--foreground)] border-[var(--foreground)]; }

  /* Action icons */
  .action-icon { @apply p-1.5 text-[var(--muted-foreground)] hover:text-[var(--foreground)] hover:bg-[var(--muted)] rounded transition-colors; }

  /* Loading */
  .spinner { @apply animate-spin h-4 w-4 border-2 border-[var(--muted)] border-t-[var(--muted-foreground)] rounded-full; }
}

/* Scrollbar - Only apply to specific containers */
.scrollbar-thin { scrollbar-width: thin; scrollbar-color: #d1d5db transparent; }
.scrollbar-thin::-webkit-scrollbar { width: 6px; height: 6px; }
.scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
.scrollbar-thin::-webkit-scrollbar-thumb { background-color: #d1d5db; border-radius: 3px; }
.dark .scrollbar-thin { scrollbar-color: #475569 transparent; }
.dark .scrollbar-thin::-webkit-scrollbar-thumb { background-color: #475569; }

/* Animation utilities */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-in-from-right {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

.animate-in {
  animation-duration: 200ms;
  animation-timing-function: ease-out;
  animation-fill-mode: both;
}

.fade-in {
  animation-name: fade-in;
}

.slide-in-from-right {
  animation-name: slide-in-from-right;
}
